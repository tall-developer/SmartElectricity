<!DOCTYPE html>
<html>

<head>
    <base href=".." />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartElectric - Location</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
</head>

<body class="location-page">
    <div class="location-container">
        <button class="back-button" onclick="goBack()">
            <svg viewBox="0 0 24 24">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
            </svg>
            Back
        </button>

        <div class="location-header">
            <h1>Location Settings</h1>
            <p>Manage your locations for accurate power updates and notifications</p>
        </div>

        <!-- Current Location Card -->
        <div class="location-card primary">
            <div class="card-header">
                <h2>Current Location</h2>
                <button class="refresh-button" onclick="refreshLocation()">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
                    </svg>
                </button>
            </div>
            <div class="location-details">
                <div class="location-info">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
                    </svg>
                    <div class="info-text">
                        <span class="location-name">Cape Town, Western Cape</span>
                        <span class="location-zone">Zone B</span>
                    </div>
                </div>
                <div class="auto-detect">
                    <label class="toggle-switch">
                        <input type="checkbox" checked onchange="toggleAutoDetect(this)">
                        <span class="slider"></span>
                    </label>
                    <span>Auto-detect location</span>
                </div>
            </div>
        </div>

        <!-- Map View -->
        <div class="map-container">
            <div id="locationMap"></div>
        </div>

        <!-- Location Status -->
        <div class="status-card warning">
            <div class="status-header">
                <svg viewBox="0 0 24 24">
                    <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" />
                </svg>
                <h3>Load-Shedding Alert</h3>
            </div>
            <p>Stage 2 scheduled today from 18:00 to 20:00</p>
        </div>

        <!-- Saved Locations -->
        <div class="saved-locations">
            <div class="section-header">
                <h2>Saved Locations</h2>
                <button class="add-button" onclick="addLocation()">
                    <svg viewBox="0 0 24 24">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                    </svg>
                    Add Location
                </button>
            </div>
            <div class="locations-list">
                <div class="location-item">
                    <div class="location-info">
                        <svg viewBox="0 0 24 24">
                            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                        </svg>
                        <div class="info-text">
                            <span class="location-name">Home</span>
                            <span class="location-address">123 Main Road, Soweto</span>
                        </div>
                    </div>
                    <button class="action-button" onclick="showLocationActions(this)">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                        </svg>
                    </button>
                </div>
                <div class="location-item">
                    <div class="location-info">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M15 11V5l-3-3-3 3v2H3v14h18V11h-6zm-8 8H5v-2h2v2zm0-4H5v-2h2v2zm0-4H5V9h2v2zm6 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V9h2v2zm0-4h-2V5h2v2zm6 12h-2v-2h2v2zm0-4h-2v-2h2v2z" />
                        </svg>
                        <div class="info-text">
                            <span class="location-name">Office</span>
                            <span class="location-address">456 Business Park, Pretoria</span>
                        </div>
                    </div>
                    <button class="action-button" onclick="showLocationActions(this)">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Area Updates -->
        <div class="area-updates">
            <h2>Area Updates</h2>
            <div class="updates-list">
                <div class="update-item maintenance">
                    <div class="update-icon">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z" />
                        </svg>
                    </div>
                    <div class="update-content">
                        <h4>Planned Maintenance</h4>
                        <p>Scheduled maintenance in Zone B on Dec 20, 2024 (9 AM - 3 PM)</p>
                        <span class="update-time">2 days away</span>
                    </div>
                </div>
                <div class="update-item outage">
                    <div class="update-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M7 2v11h3v9l7-12h-4l4-8z" />
                        </svg>
                    </div>
                    <div class="update-content">
                        <h4>Power Outage</h4>
                        <p>Unplanned outage reported in your area. Estimated restoration: 2 hours</p>
                        <span class="update-time">10 minutes ago</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Location Modal -->
    <div id="location-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Location</h2>
                <button class="close-modal" onclick="closeLocationModal()">×</button>
            </div>
            <form id="location-form" onsubmit="saveLocation(event)">
                <div class="form-group">
                    <label for="location-name">Location Name</label>
                    <input type="text" id="location-name" required placeholder="e.g., Home, Office">
                </div>
                <div class="form-group">
                    <label for="location-address">Address</label>
                    <input type="text" id="location-address" required placeholder="Enter address">
                </div>
                <div class="form-group">
                    <label>Notification Preferences</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" checked> Load-shedding alerts
                        </label>
                        <label>
                            <input type="checkbox" checked> Maintenance notices
                        </label>
                        <label>
                            <input type="checkbox" checked> Power outages
                        </label>
                    </div>
                </div>
                <button type="submit" class="primary-button">Save Location</button>
            </form>
        </div>
    </div>

    <!-- Location Actions Modal -->
    <div id="actions-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Location Actions</h2>
                <button class="close-modal" onclick="closeActionsModal()">×</button>
            </div>
            <div class="actions-list">
                <button class="action-button" onclick="setAsDefault()">
                    <svg viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
                    </svg>
                    Set as Default
                </button>
                <button class="action-button" onclick="editLocation()">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                    </svg>
                    Edit Location
                </button>
                <button class="action-button warning" onclick="deleteLocation()">
                    <svg viewBox="0 0 24 24">
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
                    </svg>
                    Delete Location
                </button>
            </div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="nav-bar">
        <a href="#home" class="nav-item" onclick="setActiveNav(this, 'home')">
            <svg class="nav-icon" viewBox="0 0 24 24">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
            </svg>
            <span>Home</span>
        </a>
        <a href="#location" class="nav-item active" onclick="setActiveNav(this, 'location')">
            <svg class="nav-icon" viewBox="0 0 24 24">
                <path
                    d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
            </svg>
            <span>Location</span>
        </a>
        <a href="#notifications" class="nav-item" onclick="setActiveNav(this, 'notifications')">
            <svg class="nav-icon" viewBox="0 0 24 24">
                <path
                    d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
            </svg>
            <span>Alerts</span>
        </a>
        <a href="screens/settings.html" class="nav-item" onclick="setActiveNav(this, 'settings')">
            <svg class="nav-icon" viewBox="0 0 24 24">
                <path
                    d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
            </svg>
            <span>Settings</span>
        </a>
    </nav>
</body>

</html>